<!DOCTYPE html>
<html lang="nl">
<!--

https://github.com/tomtor/school-crowd

-->
<head>
<meta charset="utf-8" />
<meta http-equiv="X-UA-Compatible" content="IE=edge">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>School Crowd Sourcing</title>
<link rel="apple-touch-icon" sizes="57x57" href="/apple-touch-icon-57x57.png">
<link rel="apple-touch-icon" sizes="60x60" href="/apple-touch-icon-60x60.png">
<link rel="apple-touch-icon" sizes="72x72" href="/apple-touch-icon-72x72.png">
<link rel="apple-touch-icon" sizes="76x76" href="/apple-touch-icon-76x76.png">
<link rel="apple-touch-icon" sizes="114x114" href="/apple-touch-icon-114x114.png">
<link rel="apple-touch-icon" sizes="120x120" href="/apple-touch-icon-120x120.png">
<link rel="apple-touch-icon" sizes="144x144" href="/apple-touch-icon-144x144.png">
<link rel="apple-touch-icon" sizes="152x152" href="/apple-touch-icon-152x152.png">
<link rel="apple-touch-icon" sizes="180x180" href="/apple-touch-icon-180x180.png">
<link rel="icon" type="image/png" href="/favicon-32x32.png" sizes="32x32">
<link rel="icon" type="image/png" href="/favicon-194x194.png" sizes="194x194">
<link rel="icon" type="image/png" href="/favicon-96x96.png" sizes="96x96">
<link rel="icon" type="image/png" href="/android-chrome-192x192.png" sizes="192x192">
<link rel="icon" type="image/png" href="/favicon-16x16.png" sizes="16x16">
<link rel="manifest" href="/manifest.json">
<link rel="mask-icon" href="/safari-pinned-tab.svg" color="#5bbad5">
<meta name="msapplication-TileColor" content="#da532c">
<meta name="msapplication-TileImage" content="/mstile-144x144.png">
<meta name="theme-color" content="#ffffff">

<script src="https://ajax.googleapis.com/ajax/libs/jquery/1.12.0/jquery.min.js"></script>
<link rel="stylesheet" href="bootstrap/bootstrap.min.css">
<script src="bootstrap/bootstrap.min.js"></script>
<link rel="stylesheet" href="school-crowd.css" />
</head>
<body onload="copyCookies()">
<div class="container">
	<div id="heading" class="jumbotron">
		<table width="100%">
			<tr>
				<td style="text-align: center;"><h2 style="padding: 2px;">School Crowd</h2><p>Zet de belangrijke objecten op de kaart</p></td><td class="logo"><a href="https://www.kadaster.nl"><img src="logo.png"/></a></td>
			</tr>
		</table>
	</div>

<script>
function getCookie(cname) {
	var name = cname + "=";
	var ca = document.cookie.split(';');
	for(var i = 0; i <ca.length; i++) {
		var c = ca[i];
		while (c.charAt(0)==' ') {
			c = c.substring(1);
		}
		if (c.indexOf(name) == 0) {
			return decodeURIComponent(c.substring(name.length,c.length));
		}
	}
	return "";
}

function setCookie(name,value) {
	expireDate = new Date;
	expireDate.setMonth(expireDate.getMonth()+1)
		document.cookie= name + "=" + encodeURIComponent(value) + ";" +
		"expires=" + expireDate.toGMTString();
}

function clrCookies() {
	setCookie("idVoornaam", "");
	setCookie("idLocation", "");
	setCookie("idLeeftijd", "");
	setCookie("idSchool", "");
	setCookie("idMail", "");
	setCookie("idPassword", "");

	copyCookies();
}

function copyCookies() {
	$("#idVoornaam").val(getCookie("idVoornaam"));
	$("#idLocation").val(getCookie("idLocation"));
	$("#idLeeftijd").val(getCookie("idLeeftijd"));
	$("#idSchool").val(getCookie("idSchool"));
	$("#idMail").val(getCookie("idMail"));
	$("#idPassword").val(getCookie("idPassword"));
}

function setCookies() {
	if ($("#idLocation").val().length == 0) {
		alert("Vul in waar je bent!");
		return;
	}
	if ($("#idVoornaam").val().length == 0) {
		alert("Vul je voornaam in!");
		return;
	}
	if ($("#idLeeftijd").val().length == 0) {
		alert("Vul in hoe oud je bent!");
		return;
	}
	if ($("#idSchool").val().length == 0) {
		alert("Vul de naam van je school in!");
		return;
	}
	if ($("#idMail").val().length == 0) {
		alert("Vul je e-Mail in!");
		return;
	}
	setCookie("idVoornaam", $("#idVoornaam").val());
	setCookie("idLocation", $("#idLocation").val());
	setCookie("idLeeftijd", $("#idLeeftijd").val());
	setCookie("idSchool", $("#idSchool").val());
	setCookie("idMail", $("#idMail").val());
	setCookie("idPassword", $("#idPassword").val());
	setCookie("idSession", Math.random().toString());
	window.location.href = 'school-crowd.html';
}

var serverBase = '/pdok-demo-data';
var server = serverBase + '/0ff8d17a-dc80-11e5-b7b0-b827eb842aa1';

function fill()
{
	filter= '%"eMail":"' + $("#idMail").val() + '"%';
	$.ajax({url: server+"/get/" + filter,
		success: function(result){ 
			if (result.length > 0) {
				$("#idVoornaam").val(result[0].properties.user);
				$("#idLeeftijd").val(result[0].properties.leeftijd);
				$("#idSchool").val(result[0].properties.school);
			}
		}});
}
</script>

<p></p>
<div class="row">
	<div class="col-sm-4" style="color:white;">
		<input type="text" id="idLocation" class="form-control" placeholder="Ben je op school / thuis / ergens anders?" required autofocus>
		<p></p>

		<label for="inputEmail" class="sr-only">e-Mail</label>
		<input type="email" id="idMail" onChange="fill()" class="form-control" placeholder="Je e-Mail">
		<p></p>

		<label class="sr-only">Voornaam</label>
		<input type="text" id="idVoornaam" class="form-control" placeholder="Je voornaam" required autofocus>
		<p></p>

		<label class="sr-only">Leeftijd</label>
		<input type="number" id="idLeeftijd" class="form-control" placeholder="Je leeftijd">
		<p></p>

		<label class="sr-only">School</label>
		<input type="text" id="idSchool" class="form-control" placeholder="Je school">
		<p></p>

		<label for="inputPassword" class="sr-only">Wachtwoord</label>
		<input type="password" id="idPassword" class="form-control" placeholder="Wachtwoord (mag leeg blijven)">
		<p></p>

		<a class="btn btn-primary btn-xl" onclick="setCookies()">START de App!</a>
		<a class="btn btn-primary btn-xl" onclick="clrCookies()">Wis alle velden</a>
	</div>
</div>
</div>
</body>
</html>
